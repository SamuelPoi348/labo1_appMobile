{% extends "base.html" %}

{% block content %}
  <h1><img src="{{ utilisateur.avatar(150) }}" 
       alt="Avatar de {{ utilisateur.nom_utilisateur }}" 
       class="rounded-circle shadow-sm mb-3" 
       width="150" height="150">
       Utilisateur : {{ utilisateur.nom_utilisateur }}</h1>
        <p>{{utilisateur.followers_count() }} followers, {{
          utilisateur.following_count() }} following.</p>
        {% if utilisateur == current_user %}
         <p><a href="{{ url_for('edit') }}">edit your profil</a> </p>
        {% elif not current_user.is_following(utilisateur)%}
        <p>
          <form action="{{ url_for('follow', nom_utilisateur=utilisateur.nom_utilisateur) }}" method="post">
            {{ form.hidden_tag() }}
            <button type="submit" class="btn btn-primary">Follow</button>
          </form>
        </p>
        {% else %}
        <p>
          <form action="{{ url_for('unfollow', nom_utilisateur=utilisateur.nom_utilisateur) }}" method="post">
            {{ form.hidden_tag() }}
            <button type="submit" class="btn btn-secondary">Unfollow</button>
          </form>
        </p>

  {% endif %}
     
 {% if utilisateur.a_propos_moi %}
    <div class="mt-3">
      <h5>À propos :</h5>
      <p>{{ utilisateur.a_propos_moi }}</p>
    </div>
  {% endif %}
  <h2>Ses posts :</h2>
  {% if posts %}
    <ul>
      {% for post in posts %}
        <li>
            <img src="{{ utilisateur.avatar(150) }}" 
           alt="Avatar de {{ utilisateur.nom_utilisateur }}" 
          class="rounded-circle shadow-sm mb-3" 
           width="50" height="50">
          <strong>{{ post.date_creation.strftime('%d %B %Y à %H:%M') }}</strong><br>
          {{ post.contenu }}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p> <img src="{{ utilisateur.avatar(150) }}" 
       alt="Avatar de {{ utilisateur.nom_utilisateur }}" 
       class="rounded-circle shadow-sm mb-3" 
       width="50" height="50">
       A aucun post pour le moment.</p>
  {% endif %}
{% endblock %}
